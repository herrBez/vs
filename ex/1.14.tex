\addtocontents{toc}{\protect\setcounter{tocdepth}{1}}
\exercise{1.14}
{
	Provare che
	\A{a [y \mapsto{} a_0]} =
	\semanticFunction{A}{a}{(s [y \mapsto{} \A{a_0}])} per ogni s $\in$
	\states.
}
{
Si vuole provare che:

$\forall{a,a_0} \in \aexp.\mbox{ }
\forall{s} \in \states.\mbox{ }
\A{a [y \mapsto{} a_0]} =
\semanticFunction{A}{a}{(s [y \mapsto{} \A{a_0}])}$.

Ciò viene dimostrato per induzione strutturale sull'espressione $a$.
\begin{itemize}
	\item $\boxed{a \equiv n}$ Per qualsiasi $a_0 \in \aexp$ e $s \in \states$ si ha:
\\

$\A{n [y \mapsto{} a_0]} = \semanticFunction{A}{n}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione $n [y \mapsto{} a_0]$ a sinistra dell'uguaglianza si
ha:

$\A{n} = \semanticFunction{A}{n}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione \A{n} a destra e sinistra dell'uguaglianza si ottiene:
\\

$n = n$, che è banalmente vero.

\item $\boxed{a \equiv x}$ Per qualsiasi $a_0 \in \aexp$ e $s \in \states$ si ha:
\\

$\A{x [y \mapsto{} a_0]} = \semanticFunction{A}{x}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione \A{x} a destra dell'uguaglianza si ottiene:
\\

$\A{x [y \mapsto{} a_0]} = (s [y \mapsto{} \A{a_0}]) \mbox{ } x $
\\

Distinguiamo i casi in cui $x$ è uguale o meno a $y$:

\begin{itemize}
	\item $\boxed{x = y}$ Facendo un semplice passo di riduzione si ottiene:
\\

$\A{a_0} = \A{a_0}$,
banalmente vero.

\item $\boxed{x \neq y}$ Riducendo a destra e sinistra per come è definita la
sostituzione si ottiene:
\\

$\A{x} = s x$
\\

Applicando la definizione di \A{x} a sinistra dell'uguaglianza si ha infine:
\\

$s x = s x$,
banalmente vero.
\end{itemize}
\item $\boxed{a \equiv a_1 + a_2}$ Per qualsiasi $a_0 \in \aexp$ e $s \in \states$ si
ha:
\\

$\A{(a_1 + a_2) [y \mapsto{} a_0]} =
\semanticFunction{A}{a_1 + a_2}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione \A{a_1 + a_2} a destra dell'uguaglianza si ottiene:
\\

$\A{(a_1 + a_2) [y \mapsto{} a_0]} =
\semanticFunction{A}{a_1}{(s [y \mapsto{} \A{a_0}])} +
\semanticFunction{A}{a_2}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione $(a_1 + a_2)[y \mapsto{} a_0]$ a sinistra si ottiene:
\\

$\A{(a_1 [y \mapsto{} a_0]) + (a_2[y \mapsto{} a_0]) } =
\semanticFunction{A}{a_1}{(s [y \mapsto{} \A{a_0}])} +
\semanticFunction{A}{a_2}{(s [y \mapsto{} \A{a_0}])} $
\\

Applicando la definizione \A{a_1 + a_2} a sinistra dell'uguaglianza si ottiene:
\\

(*) $\A{(a_1 [y \mapsto{} a_0])} + \A{(a_2[y \mapsto{} a_0])} =
\semanticFunction{A}{a_1}{(s [y \mapsto{} \A{a_0}])} +
\semanticFunction{A}{a_2}{(s [y \mapsto{} \A{a_0}])} $
\\

Siccome $a_1$ e $a_2$ sono sotto-espressioni di $a$, l'ipotesi induttiva vale
su di esse. Dato $i \in{} \{1, 2\}$ possiamo dunque asserire che:
\\

$\A{(a_i [y \mapsto{} a_0])} =
\semanticFunction{A}{a_i}{(s [y \mapsto{} \A{a_0}])}$
\\

Sostituendo in (*) si ha quindi:
\\

$\A{(a_1 [y \mapsto{} a_0])} + \A{(a_2[y \mapsto{} a_0]) } =
 \A{(a_1 [y \mapsto{} a_0])} + \A{(a_2[y \mapsto{} a_0]) }$,
 che è banalmente vero.

}

\item $\boxed{a \equiv a_1 - a_2}$ Analogo al caso $a_1 + a_2$.

\item $\boxed{a \equiv a_1 * a_2}$ Analogo al caso $a_1 + a_2$.
\end{itemize}
\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
