\newcommand{\powerset}[1]{\raisebox{.15\baselineskip}{\Large\ensuremath{\wp}}(#1)}

\exercise{Esercizio 13}
{
  Sia \setRel{P}{\leq} un poset con bottom $\bot$. Un sottoinsieme
  $S \subseteq P$ è \textit{down-closed} se
  $$
  \forall{x\in S}.\forall{y}\in P.(y \leq x \implies y \in S).
  $$
  Si osservi, in particolare, che $\emptyset$ è down-closed. Sia (per
  definizione) $dc(P) = \{S \subseteq P | S \text{ è down-closed}\}$.
  \begin{enumerate}
    \item Provare che \setRel{dc(P)}{\subseteq} è un CPO. \vspace{.3em} \\
  \noindent Si consideri ora il powerset CPO \setRel{\powerset{P}}{\subseteq} e
    la funzione $f : \powerset{P} \to dc(P)$ definita come segue:
    $$
    f(X) = \{p \in P | \exists{x}\in X.p \leq x\}.
    $$
    \item Provare che $f$ è ben definita, cioè che per ogni
      $X \in \powerset{P}$, $f(X) \in dc(P)$.
    \item Provare che $f$ è continua.
  \end{enumerate}
}
{}

Di seguito verrà fornita una prova per ciascuno dei tre quesiti sopra elencati.

\begin{proof}

$$
\boxed{\text{\setRel{dc(P)}{\subseteq} è un CPO}}
$$

Innanzitutto occorre notare che \setRel{dc(P)}{\subseteq} è un poset poichè è:

\begin{itemize}
  \item riflessivo ($\subseteq$ è una relazione riflessiva);
  \item transitivo ($\subseteq$ è una relazione transitiva);
  \item anti-simmetrico (due sottoinsiemi mutuamente contenuti l'uno nell'altro
    sono lo stesso insieme).
\end{itemize}

Resta ora da provare che esiste il lub di ogni catena $Y$ di tale poset, ovvero:
$$
\forall{Y}\subseteq dc(P).
          (\forall{d_1,d_2}\in Y.d_1 \subseteq d_2 \lor d_2 \subseteq d_1)
              \implies
          (\exists{d}\in dc(P). d = \sqcup Y)
$$

Sia per ipotesi $\sqcup Y = \bigcup Y$\footnote{dove $\bigcup Y$ è l'unione di
tutti gli insiemi in $Y$}: dimostriamo effettivamente che tale insieme è il lub
di Y:
\begin{itemize}
  \item $\bigcup Y \in dc(P)$ è un upper bound per $Y$, poichè
    $\forall{S}\in Y.\ S \subseteq \bigcup Y$ (tutti gli elementi di $S$ sono
    contenuti in $\bigcup Y$);
  \item Sia $d'\in dc(P)$ un altro upper bound per $Y$. Siccome la relazione di
    ordinamento è $\subseteq$, ciò vuol dire che tutti gli elementi di $Y$ sono
    in $d'$. Ma tutti gli elementi di $Y$ equivalgono a $\bigcup Y$:
    $\bigcup Y \subseteq d'$.
\end{itemize}

$$
\boxer{\forall{X} \in \powerset{P}. f(X) \in dc(P)}
$$

Per dimostrare questa seconda proprietà, è sufficiente mostrare che
$f(X) \subseteq P$ è down-closed:

\begin{itemize}
  \item Se $\not \exists{x}\in X. p\in P \land p \leq x$; ciò vuol dire che in
    questo caso $f(X) = \emptyset$ (che per osservazione nella consegna è
    down-closed);
  \item Se $\exists{x}\in X.\ p \leq x$ per qualche $p \in P$, allora $f(X)$ è
    ancora down-closed. Ipotizziamo per assurdo che
    $\exists{s\in f(X)}.\exists{p}\in P.(p \leq s \land p \not \in f(X))$: ciò
    non è possibile, poichè se $s \in  f(X)$ e $p \leq s$ allora $p \leq x$,
    dove $x$ è l'elemento dichiarato ad inizio riga. Ma se $p \leq x$, allora
    $p \in f(X)$ per definizione di $f(X)$.
\end{itemize}

$$
\boxer{\text{Continuità di } f}
$$

Affinchè $f$ sia continua è necessario che (1) sia monotona e che (2) il lub
della sua immagine coincida con l'immagine del suo lub per ogni catena del
powerset di $P$.

\begin{enumerate}
  \item $f$ è monotona: si considerino due insiemi
    $X,Y\in dc(P). X \subseteq Y$. Per la definizione di $f$, $f(X)$ conterrà
    tutti gli elementi di $X$ che minori o uguali di un certo maggiorante.
    Ma $Y$ contiene anch'esso tutti gli elementi di $X$ che soddisfano tale
    proprietà, per cui $f(X) \subseteq f(Y)$;
  \item Una catena derivante da un powerset può essere generalizzata ad un
    gruppo di insiemi in cui  vi è insieme ``massimo'' contenente tutti gli
    elementi di qualsiasi altro insieme della catena.

    Ma, in particolare, è possibile notare che tale insieme è uguale all'unione
    di sè stesso e tutti gli insiemi in esso contenuti facenti parte della
    catena. Ciò vuol dire che
    $$
    \sqcup\{f\ d | d \in Y\} = f(\sqcup Y)
    $$
    per ogni catena in $\powerset{P}$.
\end{enumerate}

\end{proof}

\let\powerset\undefined
