\newcommand{\exitifSOS}{\SOSRule{exitif}{}{SOS}}
\exercise{Esercizio 6}
{Assume that the language \while{} includes a new iterative command:
$$
\wbSE{b}{S}{b'}
$$		
where $b, b' \in \bexp$ and $S \in \stm$, whose informal semantics goes as follows:
this behaves like a standard while-loop $\wbS{b}{S}$ where at the end of any iteration
of the body $S$ of the Boolean expression $b'$ is evaluated and if $b'$ is evaluated
to true then the loop is terminated (with no change to the current state).
\begin{enumerate}[label=$\arabic*$.]
	\item Define the small step operational semantics of this new iterative command.
	\item Prove the following semantic equivalence:
	$$
	\wbSE{b}{S}{\neg b} \eqSOS \wbS{b}{S}
	$$
\end{enumerate}
}
{
	\begin{enumerate}
\item In analogia con quanto fatto per $\wbS{b}{S}$ definisco $\wbSE{b}{S}{b'}$ come unfolding:
$$
\wbSE{b}{S}{b'} \Rar{ } \ifABC{b}{(S; (\ifABC{b'}{\skipForFriends}{(\wbSE{b}{S}{b'})}))}{\skipForFriends} 
$$	
e chiamo questo assioma $\exitifSOS$.

Argomento brevemente perché la regola definita è quella cercata:
se la guardia $b$ viene valutata $\semtrue$ allora viene eseguito il corpo
$S$. Una volta terminata la valutazione di $S$ viene valutata la guardia $b'$ se è vera si esce dal corpo senza
cambiare lo stato ($\skipForFriends$) 
altrimenti viene eseguito un nuovo ciclo.
\item Devo dimostrare che:
$$
\forall s, s' : (\wbSE{b}{S}{\neg b} \Rar{*} s' \iff  \wbS{b}{S} \Rar{*} s')
$$
\end{enumerate}
}